---
title: "index.qmd"
format: html
editor: visual
---

#DATA EXPLORATION

```{r}
#| echo: false

rm(list=ls()) 

#Read in all libraries 
library(dplyr)
library(tidyr)
library(tidyverse)
library(sampling)
library(haven) 
library(srvyr)
library(ipumsr)

```

```{r}
#Read in data 
data <- read.csv("data/korea_waterdata.csv")

```

You can add options to executable code like this

#DATA CLEANING 
```{r} 
#Remove X's from variable names 
for ( col in 1:ncol(data) ){
    colnames(data)[col] <- sub("X", "", colnames(data)[col])
}

for ( col in 1:ncol(data) ){
    colnames(data)[col] <- sub("\\.", "_", colnames(data)[col])
}

data <- data %>%
  rename_all(~ ifelse(grepl("_", .), ., paste0(., "_0")))

# #Remove .* 
# names(data) <- sub("\\.{1}\\d*$", "", names(data))

data <- rename(data, Region = Year_0)

#Pivot 
data_tidy <- data %>% 
  pivot_longer(
    cols = !Region,
    names_to = c("year", "measure_type"),
    names_sep = "_",
    values_to = "Value"
  )



```



#DATA VISUALIZATIONS
